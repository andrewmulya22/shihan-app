<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <!-- Personal stylesheet -->
    <link rel="stylesheet" href="../assets/style.css">

    <!-- Montserrat font -->
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>

    <!-- Ringbar stylesheet -->
    <link rel="stylesheet" href="../assets/ringbar.css">
    <link rel="stylesheet" href="../assets/lgt-btn.css">

    <title>Main Page</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand" href="#">
            <img src="/assets/Assets/Logo.png" style="height: 50px; width: auto; margin-left: 15px;">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/explore">Find</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">FAQ</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link">Account</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <div class="input-group">
                    <input class="form-control searchValue" type="search" placeholder="Search" aria-label="Search">
                    <div class="input-group-append">
                        <button class="btn btn-primary my-2 my-sm-0 buttonSearch" type="submit" value="submit">Search</button>
                    </div>
                </div>
                <div class="navigation">
                    <a class="logout-btn" href="#">
                        <img src="../assets/Assets/powerbutton.png" class="powerbuttonimg logoutLink">
                        <div class="logout logoutLink">LOGOUT</div>
                    </a>
                </div>
            </form>
        </div>
    </nav>

    <h2 class="youracc-title">Your Account</h2>

    <!-- Ringbar -->
    <div class="container p-5">
        <div class="progress" data-percentage="100">
            <span class="progress-left">
                <span class="progress-bar"></span>
            </span>
            <span class="progress-right">
                <span class="progress-bar"></span>
            </span>
            <div class="progress-value">
                <div>
                    <span class="points-owned"><%= result2.POIN %></span><br> Points
                </div>
            </div>
        </div>
    </div>

    <!-- Account info -->
    <form class="acc border d-flex flex-column" action="#" method="post">
        <div class="accinfo">
            <div class="input-group mb-4">
                <label for="name" class="accinfo-label"><b>Name</b></label>
                <input type="text" class="form-control accinfo-input" aria-label="Recipient's name" aria-describedby="change-name" style="margin-top: 0;" id="fieldNama" value="<%= result.nama%>">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="change-name">Change</button>
                </div>
            </div>
        </div>
        <div class="accinfo">
            <div class="input-group mb-4">
                <label for="uname" class="accinfo-label"><b>Username</b></label>
                <input type="text" class="form-control accinfo-input" aria-label="Recipient's username" aria-describedby="change-uname" style="margin-top: 0;" id="fieldUname" readonly value="<%= result.USERNAME %>">
            </div>
        </div>
        <div class="accinfo">
            <div class="input-group mb-4">
                <label for="email" class="accinfo-label"><b>Email</b></label>
                <input type="text" class="form-control accinfo-input" aria-label="Recipient's email" aria-describedby="change-email" style="margin-top: 0;" id="fieldEmail" readonly value="<%= result.email %>">
            </div>
        </div>
        <div class="accinfo">
            <div class="input-group">
                <label for="psw" class="accinfo-label"><b>Password</b></label>
                <input type="password" placeholder="Enter new password" class="form-control accinfo-input" aria-label="Recipient's passowrd" aria-describedby="change-password" style="margin-top: 0;" id="fieldPassword">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="change-password">Change</button>
                </div>
            </div>
        </div>
    </form>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <!-- Option 2: jQuery, Popper.js, and Bootstrap JS
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    -->

    <script>
        $(function() {
            $('.whatsin').keyup(function() {
                if ($('.whatsin').val() != "") {
                    $('.whatsin-cont').css("width", "100%")
                } else {
                    $('.whatsin-cont').css("width", "300px")
                }
                console.log($('.whatsin').val())
            });
            $('.buttonSearch').on("click", function(e) {
                e.preventDefault()
                var str = $(".searchValue").val()
                location.href = "/explore/" + str
            })
            $('.logout-btn').click(function(e) {
                e.preventDefault()
                $.ajax({
                    type: "POST",
                    url: "/logout",
                    success: function(res) {
                        location.href = "/"
                    }
                })
            })
            $('#change-name').click(function(e) {
                e.preventDefault()
                let name = $("#fieldNama").val()
                $.ajax({
                    type: "POST",
                    url: "/account/nama",
                    data: {
                        data: name
                    },
                    success: function(res) {
                        console.log("success")
                    }
                })
            })
            $('#change-uname').click(function(e) {
                e.preventDefault()
                let uname = $("#fieldUname").val()
                $.ajax({
                    type: "POST",
                    url: "/account/username",
                    data: {
                        data: uname
                    },
                    success: function(res) {
                        console.log("success")
                    }
                })
            })
            $('#change-email').click(function(e) {
                e.preventDefault()
                let email = $("#fieldEmail").val()
                $.ajax({
                    type: "POST",
                    url: "/account/email",
                    data: {
                        data: name
                    },
                    success: function(res) {
                        console.log("success")
                    }
                })
            })
            $('#change-password').click(function(e) {
                e.preventDefault()
                let password = $("#fieldPassword").val()
                $.ajax({
                    type: "POST",
                    url: "/account/password",
                    data: {
                        data: password
                    },
                    success: function(res) {
                        console.log("success")
                    }
                })
            })
        })
    </script>

</body>

</html>